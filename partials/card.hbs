{{!--
Re-usable card for linking to posts
--}}

{{#if @first}}
    <article class="container gh-card--first">
        <a class="g-row gh-card--first-link" href="{{url}}">
            {{#if feature_image}}
                <picture class="g-col-12 g-col-md-7 gh-card--first-picture">
                  <source
                    srcset="
                    {{img_url feature_image size="xxs" format="avif"}} 30w,
                    {{img_url feature_image size="xs" format="avif"}} 100w,
                    {{img_url feature_image size="s" format="avif"}} 300w,
                    {{img_url feature_image size="m" format="avif"}} 600w,
                    {{img_url feature_image size="l" format="avif"}} 1200w,
                    {{img_url feature_image size="xl" format="avif"}} 2000w"
                    {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
                    type="image/avif"
                    {{^if @first}}loading="lazy"{{/if}}
                  >
                  <source
                    srcset="
                    {{img_url feature_image size="xxs" format="webp"}} 30w,
                    {{img_url feature_image size="xs" format="webp"}} 100w,
                    {{img_url feature_image size="s" format="webp"}} 300w,
                    {{img_url feature_image size="m" format="webp"}} 600w,
                    {{img_url feature_image size="l" format="webp"}} 1200w,
                    {{img_url feature_image size="xl" format="webp"}} 2000w"
                    {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
                    type="image/webp"
                    {{^if @first}}loading="lazy"{{/if}}

                  >
                  <img
                    srcset="
                    {{img_url feature_image size="xxs"}} 30w,
                    {{img_url feature_image size="xs"}} 100w,
                    {{img_url feature_image size="s"}} 300w,
                    {{img_url feature_image size="m"}} 600w,
                    {{img_url feature_image size="l"}} 1200w,
                    {{img_url feature_image size="xl"}} 2000w"
                    {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
                    src="{{img_url feature_image size="m"}}"
                    alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
                    class="gh-card-image"
                    {{^if @first}}loading="lazy"{{/if}}
                  >
                </picture>
            {{/if}}
            <div class="g-col-12 g-col-md-5 gh-card--first-content">
                <div class="gh-card--first-tags">
                    {{#primary_tag}}
                        <span class="post-card-primary-tag">{{name}}</span>
                    {{/primary_tag}}
                </div>
                <h2 class="gh-card--first-title">{{title}}</h2>
                <p>{{excerpt}}</p>
                <span class="gh-card--first-meta"><time datetime="{{date format="YYYY-MM-DD"}}">{{date format="D MMM YYYY"}}</time> <span class="bull">&bull;</span> {{reading_time}}</span>
            </div>
        </a>
    </article>
{{else}}
    <article class="{{post_class}}">
        <a class="card card--geo" href="{{url}}">
        {{#if feature_image}}
            <div class="card--geo__image-wrapper">
                <picture class="">
                    <source
                        srcset="
                        {{img_url feature_image size="xxs" format="avif"}} 30w,
                        {{img_url feature_image size="xs" format="avif"}} 100w,
                        {{img_url feature_image size="s" format="avif"}} 300w,
                        {{img_url feature_image size="m" format="avif"}} 600w,
                        {{img_url feature_image size="l" format="avif"}} 1200w,
                        {{img_url feature_image size="xl" format="avif"}} 2000w"
                        {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
                        type="image/avif"
                        {{^if @first}}loading="lazy"{{/if}}
                    >
                    <source
                        srcset="
                        {{img_url feature_image size="xxs" format="webp"}} 30w,
                        {{img_url feature_image size="xs" format="webp"}} 100w,
                        {{img_url feature_image size="s" format="webp"}} 300w,
                        {{img_url feature_image size="m" format="webp"}} 600w,
                        {{img_url feature_image size="l" format="webp"}} 1200w,
                        {{img_url feature_image size="xl" format="webp"}} 2000w"
                        {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
                        type="image/webp"
                        {{^if @first}}loading="lazy"{{/if}}

                    >
                    <img
                        srcset="
                        {{img_url feature_image size="xxs"}} 30w,
                        {{img_url feature_image size="xs"}} 100w,
                        {{img_url feature_image size="s"}} 300w,
                        {{img_url feature_image size="m"}} 600w,
                        {{img_url feature_image size="l"}} 1200w,
                        {{img_url feature_image size="xl"}} 2000w"
                        {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
                        src="{{img_url feature_image size="m"}}"
                        alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
                        class="card--geo__image"
                        {{^if @first}}loading="lazy"{{/if}}
                    >
                </picture>
            </div>
        {{/if}}
        <div class="card--geo__tag">
            {{#primary_tag}}
                <span class="post-card-primary-tag">{{name}}</span>
            {{/primary_tag}}
        </div>
        <div class="card--geo__body">
            <h2 class="gh-card-title">{{title}}</h2>
            <p>{{excerpt}}</p>
            <strong>Read more</strong>
        </div>
    </a>
</article>
{{/if}}